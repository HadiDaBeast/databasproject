<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<link rel= "stylesheet" type= "text/css" href= "../static/styles/index.css">
</head>
<body>
    <div>Curent chosen student:</div>
    <div id="current">{{current_name}}, {{current_real_name}}</div>
    <div id="errorDiv" style="color: red;">{{error}}</div>
    <div class="NameContainer">
        <div>Registrerad på</div>
        <div>Kommer in</div>
        <div>Spärrad</div>
    </div>
    <div class="container">
        <div id="All">
            {%if Registered is not none%}
                {% for item in Registered %}
                    <div class= "course">{{item[0]}}, {{item[1]}} / {{item[2]}}</div>
                {% endfor %}
            {%endif%}            
        </div>
        <div id="KomIn">
            {%if Possible is not none%}
                {% for item in Possible %}
                    <div class= "course">{{item}}</div>
                {% endfor %}
            {%endif%}
        </div>
        <div id="Sparr">
            {%if Sparrad is not none%}
                {% for item in Sparrad %}
                    <div class= "course">{{item}}</div>
                {% endfor %}
            {%endif%}
        </div>
    </div>
    <div class="buttons">
        <button class="open-modal" type="submit" data-target="modal_add_student" name="action" value="add_student">Add student</button>
        <button class="open-modal" type="submit" data-target="modal_remove_student" name="action" value="remove_student">Remove student</button>
        <button class="open-modal" type="submit" data-target="modal_update_student_name" name="action" value="update_student_name">Update student name</button>
        <button class="open-modal" type="submit" data-target="modal_update_student_personnumber" name="action" value="update_student_personnumber">Update student personnumber</button>
        <button class="open-modal" type="submit" data-target="modal_get_student" name="action" value="get_student">Select student</button>
        <button class="open-modal" type="submit" data-target="modal_add_course" style="background-color: blueviolet;" name="action" value="add_course">Add course</button>
        <button class="open-modal" type="submit" data-target="modal_remove_course" style="background-color: blueviolet;" name="action" value="remove_course">Remove course</button>
        <button class="open-modal" type="submit" data-target="modal_update_course_code" style="background-color: blueviolet;" name="action" value="update_course_code">Update course code</button>
        <button class="open-modal" type="submit" data-target="modal_update_course_hp" style="background-color: blueviolet;" name="action" value="update_course_hp">Update course HP</button>
        <button class="open-modal" type="submit" data-target="modal_update_course_type" style="background-color: blueviolet;" name="action" value="update_course_type">Update course type</button>
        <button class="open-modal" type="submit" data-target="modal_update_course_requirements" style="background-color: blueviolet;" name="action" value="update_course_requirements">Update course requirements</button>
        <button class="open-modal" type="submit" data-target="modal_add_registrations" name="action" style="background-color: blue;" value="add_registrations">Add registrations</button>
        <button class="open-modal" type="submit" data-target="modal_update_registrations_hp" name="action" style="background-color: blue;" value="update_registrations_hp">Update registrations</button>
        <button class="open-modal" type="submit" data-target="modal_remove_registrations" name="action" style="background-color: blue;" value="remove_registrations">Remove registrations</button>
    </div>

    <div id="modal_add_student" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form method="post" action="/add_student">
                <input type="text" placeholder="Name" name="name" id="">
                <input type="text" placeholder="Personnumber" name="pid" id="">
                <button>Add</button>
            </form>
        </div>
    </div>

    <div id="modal_remove_student" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form method="post" action="/remove_student">
            <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <button>Remove</button>
            </form>
        </div>
    </div>
    
    
    <div id="modal_update_student_name" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form method="post" action="/update_student_name">
                <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <input type="text" placeholder="Name" name="name" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_update_student_personnumber" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form method="post" action="/update_student_personnumber">
                <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <input type="text" placeholder="New personnumber" name="newpid" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_get_student" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form method="GET" action="/get_student">
                <input type="text" name="pid" placeholder="Personnumber">
                <button>Get</button>
            </form>
        </div>
    </div>
    <div id="modal_add_course" class="modal">
        <div class="modal-content">
            <form method="post" action="/add_course">
                <span class="close">&times;</span>
                <input type="text" placeholder="Course code" name="course" id="">
                <input type="text" placeholder="HP" name="hp" id="">
                <input type="text" placeholder="Type" name="type" id="">
                <button>Add</button>
            </form>
        </div>
    </div>
    <div id="modal_remove_course" class="modal">
        <div class="modal-content">
            <form method="post" action="/remove_course">
            <span class="close">&times;</span>
            <input type="text" placeholder="Course code" name="course" id="">
                <button>Remove</button>
            </form>
        </div>
    </div>
    <div id="modal_update_course_code" class="modal">
        <div class="modal-content">
            <form method="post" action="/update_course_code">
            <span class="close">&times;</span>
            <input type="text" placeholder="Course code" name="course" id="">
            <input type="text" placeholder="New course code" name="new" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_update_course_hp" class="modal">
        <div class="modal-content">
            <form method="post" action="/update_course_hp">
            <span class="close">&times;</span>
            <input type="text" placeholder="Course code" name="course" id="">
            <input type="text" placeholder="New HP" name="hp" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_update_course_type" class="modal">
        <div class="modal-content">
            <form method="post" action="/update_course_type">  
            <span class="close">&times;</span>
            <input type="text" placeholder="Course code" name="course" id="">
            <input type="text" placeholder="New type" name="type" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_update_course_requirements" class="modal">
        <div class="modal-content">
            <form method="post" action="/update_course_requirements">
            <span class="close">&times;</span>
            <input type="text" placeholder="Course code" name="course" id="">
            <input type="text" placeholder="New requirement" name="requirement" id="">
            <input type="text" placeholder="required HP" name="hp" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_add_registrations" class="modal">
        <div class="modal-content">
            <form method="post" action="/add_registrations">
                <span class="close">&times;</span>
                <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <input type="text" placeholder="Course code" name="course" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
        <div id="modal_update_registrations_hp" class="modal">
        <div class="modal-content">
            <form method="post" action="/update_registrations_hp">
                <span class="close">&times;</span>
                <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <input type="text" placeholder="Course code" name="course" id="">
                <input type="text" placeholder="HP" name="hp" id="">
                <button>Update</button>
            </form>
        </div>
    </div>
    <div id="modal_remove_registrations" class="modal">
        <div class="modal-content">
            <form method="post" action="/remove_registrations">
                <span class="close">&times;</span>
                <input type="text" value="{{ current_name }}" placeholder="Personnumber" name="pid" id="">
                <input type="text" placeholder="Course code" name="course" id="">
                <button>Update</button>
            </form>
        </div>
    <script>
    document.querySelectorAll('.open-modal').forEach(button => {
        button.addEventListener('click', () => {
            const targetId = button.getAttribute('data-target');
            const modal = document.getElementById(targetId);
            if (modal) modal.style.display = 'block';
        });
    });

    document.querySelectorAll('.close').forEach(span => {
        span.addEventListener('click', () => {
            const modal = span.closest('.modal');
            if (modal) modal.style.display = 'none';
        });
    });

    </script>
</body>
</html>